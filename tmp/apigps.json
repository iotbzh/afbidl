{"afbidl": "0.1", "info": {"version": "0.1", "maintainer": "Scott Rifenbark", "description": "GPS service reports current WGS84 coordinates from GNSS devices via the gpsd application.", "apiname": "gps", "author": "AGL", "title": "Service for geolocation", "homepage": "https://doc.automotivelinux.org/..."}, "verbs": {"subscribe": {"reply": {"success": {"set-state": {"listening": true}, "schema": "$/schemas/none"}}, "request": "$/schemas/subscription-desc", "description": "subscribe to gps/gnss events"}, "unsubscribe": {"reply": {"success": {"set-state": {"listening": false}, "schema": "$/schemas/none"}}, "request": "$/schemas/subscription-desc", "description": "unsubscribe to gps/gnss events"}, "location": {"reply": {"success": "$/schemas/location", "_": "An error can be returned when the service isn't ready"}, "request": "$/schemas/none", "description": "get current gps/gnss coordinates"}, "record": {"reply": {"success": {"set-state": {"recording": true}, "schema": "$/schemas/record/reply"}, "_": "An error can be returned when the service isn't ready"}, "request": "$/schemas/record/request", "description": "Entering *record* mode you must send **{\"state\": \"on\"}** with the **record**\nverb which will have a JSON response of **{\"filename\": \"gps_YYYYMMDD_hhmm.log\"}**\npointing to log under *app-data/agl-service-gps*\n\nNow to enter *replaying* mode you must symlink or copy a GPS dump to\n*app-data/agl-service-gps/recording.log* and restart the service.\nFrom then on out the previously recorded GPS data will loop infinitely\nwhich is useful for testing or demonstration purposes.\n"}}, "state-machines": {"recording": {"states": [false, true], "initial": false}, "listening": {"states": [false, true], "initial": false}}, "tools": {"doc": {"version": null, "author": null, "keywords": "gps", "id": "gps-api", "chapters": [{"url": "abstract.md", "name": "Abstract"}, {"url": "userguide.md", "name": "User Guide"}], "src_prefix": "api-gps"}, "afb-genskel": {"postfix": "_cb", "scope": "static", "prefix": "req_", "init": "init_gps"}}, "events": {"location": {"when-state": {"listening": true}, "schema": "$/schemas/location"}}, "schemas": {"record": {"reply": {"required": ["filename"], "type": "object", "properties": {"filename": {"pattern": "gps_\\d{4}\\d{2}\\d{2}_\\d{2}\\d{2}.log", "type": "string", "title": "the name of the file that records the data of format gps_YYYYMMDD_hhmm.log"}}}, "request": {"required": ["state"], "type": "object", "properties": {"state": {"const": "on"}}}}, "none": {"const": null, "title": "no value, just null"}, "location": {"type": "object", "properties": {"latitude": {"minimum": -90, "type": "number", "maximum": 90, "title": "the latitude in degrees"}, "track": {"minimum": 0, "type": "number", "maximum": 360, "title": "the heading in degrees"}, "timestamp": {"pattern": "\\d{4,}-[01][0-9]-[0-3][0-9]T[012][0-9]:[0-5][0-9]:[0-5][0-9].*", "type": "string", "title": "time stamp of the location as a ISO8601 date"}, "altitude": {"minimum": -20000, "type": "number", "maximum": 20000, "title": "the altitude in meters above the normal geoide"}, "speed": {"minimum": 0, "type": "number", "maximum": 6000, "title": "the speed in meter per seconds m/s"}, "longitude": {"minimum": -180, "type": "number", "maximum": 180, "title": "the longitude in degrees"}}, "title": "the location"}, "subscription-desc": {"required": ["value"], "type": "object", "properties": {"value": {"enum": ["location"]}}, "title": "Description of the event subscribed or unsubscribed"}}}
